<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8">
  <title>MayGame</title>
  <meta name="description" content="No description">
  <meta name="author" content="Some dude">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- #region -->
  <!-- <script id="gun_cdn_script" src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
  <script id="sea_cdn_script" src="https://cdn.jsdelivr.net/npm/gun/sea.js"></script> -->
  <script id="wsjs_innerscript" src="js/core/wsjs.js"></script>
  <link id="css_styles_core" rel="stylesheet" href="css/styles.css" />
</head>
<body>
<style>
        iframe{
            position: fixed;
            z-index: 0;
            display: block;
            width: 100%;
            height: 100%;
            border: none;
            overflow-y: auto;
            overflow-x: hidden;
            top: 0;
            bottom: 0;
            right: 0;
            left: 0;
        }
        /* html 
{
 overflow: auto;
} */
 
html, body, iframe 
{
 margin: 0px; 
 padding: 0px; 
 height: 100vh; 
 width: 100vw;
 border: none;
 overflow: hidden;
}
</style>
<div id="menu" style="position: fixed; z-index: 2147483210; bottom: 0;">
    <button onclick="toggle(quests_layer)">Quests</button>
    <button onclick="toggle(quests_add_layer)">Quests Add/Edit</button>
    <button onclick="toggle(profile_layer)">Profile</button>
    <button onclick="toggle(map_layer)">Map</button>
    <button onclick="toggle_pevents(frame_hud)">Hud</button>
    <button onclick="toggle(curr_layer)" style="background-color: mediumpurple;">Currencies</button>
    <button onclick="toggle(test_layer)" style="background-color: mediumturquoise;">Test</button>
    <br>
    <input type="text" value="">
    <button onclick="window.frames.test.postMessage('Lunar blessings to you all!','https://maygame.xxx')">Send test message</button>
    <div id="message_div"></div>
</div>
    <br>
<div id="quests_layer" class="layer" style="display: none; ">
    <iframe name="quests" src="<%= quests_url %>" id="frame_quests" style="border: 0; width: 100%; height: 100%"></iframe>
</div></div>
<div id="quests_add_layer" class="layer" style="display: none; ">
    <iframe name="quests_add" src="<%= quests_add_url %>" id="frame_quests_add" style="border: 0; width: 100%; height: 100%"></iframe>
</div></div>
<div id="hud_layer" class="layer">
    <iframe name="hud" src="<%= hud_url %>" id="frame_hud" style="border: 0; width: 100%; height: 100%; z-index: -5;"></iframe>
</div>
<div id="map_layer" class="layer" style="display: none;">
    <iframe name="map" src="<%= map_url %>" id="frame_map" style="border: 0; width: 100%; height: 100%"></iframe>
</div>
<div id="profile_layer" class="layer" style="display: none;">
    <iframe name="profile" src="<%= profile_url %>" id="frame_profile" style="border: 0; width: 100%; height: 100%"></iframe>
</div>
<div id="curr_layer" class="layer" style="display: none;">
<div style="
    border: 5px solid royalblue; background-color: midnightblue;
    top: 0; left: 0; right: 0; bottom: 0;
    height: 100%; width: 100%;"
    >
    <iframe name="currencies" src="<%= currency_url %>" id="frame_profile" style="border: 0; width: 100%; height: 100%"></iframe>
</div></div>
<div id="test_layer" class="layer" style="display: none;">
    <iframe name="test" src="frames/test" id="frame_test" style="border: 0; width: 100%; height: 100%"></iframe>
</div>

<script defer id="js_init">
    (()=>{
        let newFid="quests_add_new_fid";
        let qed=document.getElementById('frame_quests_add');
        qed.src=qed.src.split('?')[0]+`?fid=${newFid}`;
    })();
</script>
<script>
    window.onmessage=(e)=>{
        // message_div.innerText=e.data; console.log(e.data)
        if(e.data.topic=='data_request'){
            console.log('data request:')
            console.log(e.data)
            e.source.postMessage({'rid':e.data.rid,'body':'Mock response'})
        }
    }

</script> 
<script>
    function toggle_pevents(target){
        if(target.style.pointerEvents=='none')
        target.style.pointerEvents='all'
        else target.style.pointerEvents = 'none'
    }
</script>
</body>
</html>