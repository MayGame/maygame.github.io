<script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gun/sea.js"></script>
<button id="gun_put" onclick="gun_save()">save</button>
<textarea id="gun_input"></textarea>
<button id="gun_load" onclick=gun_load()>load</button>
<textarea id="gun_output"></textarea>
<br>
<button id="gun_put2" onclick="gun_save2()">save</button>
<textarea id="gun_input2"></textarea>
<button id="gun_load2" onclick=gun_load2()>load</button>
<textarea id="gun_output2"></textarea>
<br>
<button id="y_put" onclick="y_save()"> y save</button>
<textarea id="y_input"></textarea>
<button id="y_load" onclick=y_load()>y load</button>
<textarea id="y_output"></textarea>
<script>
    var gun = new Gun();
    function gun_save() {
        var data = document.getElementById("gun_input").value;
        gun.get("test").get("1").put(data);
    }
    function gun_load() {
        var field = document.getElementById("gun_output")
        var val=""
        gun.get("test").get("1").once(function(value){
  val = value
})
        field.value = val;
    }
    var gun2 = new Gun();
    function gun_save2() {
        var data = document.getElementById("gun_input2").value;
        gun2.get("test").get("1").put(data);
    }
    function gun_load2() {
        var field = document.getElementById("gun_output2")
        var val=""
        gun2.get("test").get("1").once(function(value){
  val = value
})
        field.value = val;
    }
    function y_save(){
        var data = document.getElementById("y_input").value;

    }
    function y_load() {
        var data = document.getElementById("y_output").value;}
</script>
<script id="js_utils">
function get_from(source,key){return source.get(key)}
</script>
<script id="js_Source">class Source{
    constructor(type, params){
        switch(type){
            case "indexeddb":
                // this.instance=var request = window.indexedDB.open("MyTestDatabase", 3);
                this.init=function(){};
                this.get=function(key){return 1};
                this.put=function(key,value){}
                break;
            case "gun":
                this.init=function(){};
                this.get=function(key){return 1};
                this.put=function(key,value){}
                break;
            case "yjs":
            this.init=function(){};
                this.get=function(key){return 1};
                this.put=function(key,value){}
            default:
                {}
            }
        this.subscribe=subscribe
    }
    static Default(){return new Source()}
}</script>
<script>
    var instance1=new Sync()
    class Sync{ 
        constructor(sources, key, keypair,encrypt,decrypt,sign) {
        var ret = {}
        for(var i= 0;i <sources.length;i++){
            sources[i].subscribe(key)
        }
        this.encrypt=encrypt
        this.decrypt=decrypt
        this.key=keypair;
        this.sources=sources;
        this.get=function(key){return 1};
        this.put=function(key,value){};
        this.sign=sign
    }
    static Simple(){return new Sync(sources,null,null,null,null,null)}
    static Default(){}
}
var knownSources={}

    instance1.put("test","test value")
</script>
<button onclick="create()">create</button>

<form style="display: none; position: absolute; background: grey;" id="create_form">
    <label for="">Parser version</label>
    <input type="text" name="qvp" list="qvList" >
    <datalist id="qvList">
    <option value="checklist">
    <option value="simple">
    <option value="extended">
    </datalist>
    <br>
    <label>Task</label>
    <textarea></textarea>
    <br>
    <label>Reward</label>
    <textarea></textarea>
    <br>
    <button>submit</button>
    <h2>Or</h2><button>Create from template</button>
</form>

<br>
<h1>Available to me</h1>
<div class="">
    <label for="">Parser version</label>
    <input type="text" name="qvp" list="qvList" >
    <datalist id="qvList">
        <option value="checklist">
        <option value="simple">
        <option value="extended">
    </datalist>
    </div>
    <button>Sort by reward</button>
    <button>Show all</button>
    <button>Show only available</button>
    <button>Sort by skill requirements</button>
    <button>Show</button>
                <br>
<h1>Created by me</h1>
<h2>Scope:</h2>
<h3>Myself</h3>
<h3>Guild</h3>
<h3>Clan</h3>
<h3>Friends</h3>
<br>
<h1>Auto generated</h1>
<h2>By utility</h2>

<br>
<br>
<br>
<br>
<br>
<br>
<h1>Schema:</h1>
<h2>Secure one (important stuff):</h2>
<p>Trusted agent (third party?) knows conditions, can verify</p>
<p>Condition usually includes getting specific type of message from known source</p>
<p></p>
<p></p>
<h2>Simplified</h2>
<p></p>
<p></p>
<script>
function create() {
document.getElementById("create_form").style.display="flex"

}

function create_form_submit(){

}
var parsers = {};
// parsers.simple.=function (){}
</script>