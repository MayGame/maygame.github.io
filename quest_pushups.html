<script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
<script src="https://cdn.jsdelivr.net/npm/gun/sea.js"></script>
<!--  -->
<textarea oninput="sync()" id="text"></textarea>
<br>
<br>
<br>
<textarea id="btn_event" oninput="btn_name()"></textarea>
<button onclick="clicked(this)" id="btn_">Button</button>
<br>
<br>
<br>
<p>push ups done:</p>
<p id="pu_progress"></p>
<br>
<br>
<br>
<!--  -->
<label>Soul to check</label>
<input type="text" id="check_soul" value="test/quests/pushups/btn_text"><br>
<label>Field</label>
<input type="text" id="check_field" value="event"><br>
<label>Target value</label>
<input type="text" id="check_target_value" value="Button"><br>
<button  onclick="check_soul()">Check</button>
<!--  -->
<script id="js_quest_core">
    var gun = new Gun("https://vine-mature-morocco.glitch.me/gun");
    console.log(gun._.graph)
    function check_soul() {
        var target = document.getElementById("check_target_value").value
        var value
        var soul = document.getElementById("check_soul").value
        var field = document.getElementById("check_field").value
        gun.get(soul).once((e)=>{
            console.log(e[field]);
            if(e[field]==target)alert("Triggered")
            else console.log("not really")
        })
    }
    function sync(){
        var text = document.getElementById("text").value
        gun.get("test").get("quests").get("pushups").get("text").put({innertext: text})
        }
        gun.get("test").get("quests").get("pushups").get("text").on((text)=>{
            document.getElementById("text").value=text.innertext
        })
    function btn_name(){
        document.getElementById("btn_").textContent=document.getElementById("btn_event").value
    }
    function clicked(obj){
        var text = obj.textContent
        console.log(text)
        gun.get("test").get("quests").get("pushups").get("btn_text").put({event: text})
    }
    function pushup_check(event){
        if(event.event=="pushup"){alert("Gut jop!")}
        else {
            console.log(event.event)
        }
    }
    gun.get("test").get("quests").get("pushups").get("btn_text").on(pushup_check)
</script>
